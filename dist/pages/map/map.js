!function(t){var e={};function o(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(r,i,function(e){return t[e]}.bind(null,i));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=10)}({10:function(t,e,o){var r=o(11),i=getApp().global;i.fly,i.regeneratorRuntime;Page({onLoad:function(){new r({key:"MEHBZ-J2EHS-MMLOJ-6EEWV-L5KC3-DVBZN"})},onReady:function(){console.log("Page onReady...")},data:{},driving:function(){var t=this,e={url:"https://apis.map.qq.com/ws/direction/v1/driving/?from=28.451060,118.199057&to=28.460376,117.975272&waypoints=28.438318,118.169977;28.399698,118.115525;28.447359,117.969599&key=MEHBZ-J2EHS-MMLOJ-6EEWV-L5KC3-DVBZN",method:"GET",dataType:"json",success:function(e){var o=e.data;if(0==o.status){for(var r=o.result.routes[0].polyline,i=[],n=2;n<r.length;n++)r[n]=Number(r[n-2])+Number(r[n])/1e6;for(n=0;n<r.length;n+=2)i.push({latitude:r[n],longitude:r[n+1]});t.setData({polyline:[{points:i,color:"#FF0000DD",width:2}]})}}};wx.request(e)},bMapTransQQMap:function(t,e){var o=52.35987755982988,r=t-.0065,i=e-.006,n=Math.sqrt(r*r+i*i)-2e-5*Math.sin(i*o),a=Math.atan2(i,r)-3e-6*Math.cos(r*o);return{longitude:n*Math.cos(a),latitude:n*Math.sin(a)}},navigatorTo:function(t){var e=t.currentTarget.dataset.url;wx.navigateTo({url:e})},switchTabTo:function(t){var e=t.currentTarget.dataset.url;wx.switchTab({url:e})}})},11:function(t,e){var o=function(){function t(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}}();var r=310,i="请求参数信息有误",n=600,a="系统错误",u=1e3,s=200,c={location2query:function(t){if("string"==typeof t)return t;for(var e="",o=0;o<t.length;o++){var r=t[o];e&&(e+=";"),r.location&&(e=e+r.location.lat+","+r.location.lng),r.latitude&&r.longitude&&(e=e+r.latitude+","+r.longitude)}return e},getWXLocation:function(t,e,o){wx.getLocation({type:"gcj02",success:t,fail:e,complete:o})},getLocationParam:function(t){"string"==typeof t&&(t=2===t.split(",").length?{latitude:t.split(",")[0],longitude:t.split(",")[1]}:{});return t},polyfillParam:function(t){t.success=t.success||function(){},t.fail=t.fail||function(){},t.complete=t.complete||function(){}},checkParamKeyEmpty:function(t,e){if(!t[e]){var o=this.buildErrorConfig(r,i+e+"参数格式有误");return t.fail(o),t.complete(o),!0}return!1},checkKeyword:function(t){return!this.checkParamKeyEmpty(t,"keyword")},checkLocation:function(t){var e=this.getLocationParam(t.location);if(!e||!e.latitude||!e.longitude){var o=this.buildErrorConfig(r,i+" location参数格式有误");return t.fail(o),t.complete(o),!1}return!0},buildErrorConfig:function(t,e){return{status:t,message:e}},buildWxRequestConfig:function(t,e){var o=this;return e.header={"content-type":"application/json"},e.method="GET",e.success=function(e){var o=e.data;0===o.status?t.success(o):t.fail(o)},e.fail=function(e){e.statusCode=u,t.fail(o.buildErrorConfig(u,result.errMsg))},e.complete=function(e){switch(+e.statusCode){case u:t.complete(o.buildErrorConfig(u,e.errMsg));break;case s:var r=e.data;0===r.status?t.complete(r):t.complete(o.buildErrorConfig(r.status,r.message));break;default:t.complete(o.buildErrorConfig(n,a))}},e},locationProcess:function(t,e,o,r){var i=this;if(o=o||function(e){e.statusCode=u,t.fail(i.buildErrorConfig(u,e.errMsg))},r=r||function(e){e.statusCode==u&&t.complete(i.buildErrorConfig(u,e.errMsg))},t.location){if(i.checkLocation(t)){e(c.getLocationParam(t.location))}}else i.getWXLocation(e,o,r)}},l=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e.key)throw Error("key值不能为空");this.key=e.key}return o(t,[{key:"search",value:function(t){if(t=t||{},c.polyfillParam(t),c.checkKeyword(t)){var e={keyword:t.keyword,orderby:t.orderby||"_distance",page_size:t.page_size||10,page_index:t.page_index||1,output:"json",key:this.key};t.address_format&&(e.address_format=t.address_format),t.filter&&(e.filter=t.filter);var o=t.distance||"1000",r=t.auto_extend||1;c.locationProcess(t,function(i){e.boundary="nearby("+i.latitude+","+i.longitude+","+o+","+r+")",wx.request(c.buildWxRequestConfig(t,{url:"https://apis.map.qq.com/ws/place/v1/search",data:e}))})}}},{key:"getSuggestion",value:function(t){if(t=t||{},c.polyfillParam(t),c.checkKeyword(t)){var e={keyword:t.keyword,region:t.region||"全国",region_fix:t.region_fix||0,policy:t.policy||0,output:"json",key:this.key};wx.request(c.buildWxRequestConfig(t,{url:"https://apis.map.qq.com/ws/place/v1/suggestion",data:e}))}}},{key:"reverseGeocoder",value:function(t){t=t||{},c.polyfillParam(t);var e={coord_type:t.coord_type||5,get_poi:t.get_poi||0,output:"json",key:this.key};t.poi_options&&(e.poi_options=t.poi_options);c.locationProcess(t,function(o){e.location=o.latitude+","+o.longitude,wx.request(c.buildWxRequestConfig(t,{url:"https://apis.map.qq.com/ws/geocoder/v1/",data:e}))})}},{key:"geocoder",value:function(t){if(t=t||{},c.polyfillParam(t),!c.checkParamKeyEmpty(t,"address")){var e={address:t.address,output:"json",key:this.key};wx.request(c.buildWxRequestConfig(t,{url:"https://apis.map.qq.com/ws/geocoder/v1/",data:e}))}}},{key:"getCityList",value:function(t){t=t||{},c.polyfillParam(t);var e={output:"json",key:this.key};wx.request(c.buildWxRequestConfig(t,{url:"https://apis.map.qq.com/ws/district/v1/list",data:e}))}},{key:"getDistrictByCityId",value:function(t){if(t=t||{},c.polyfillParam(t),!c.checkParamKeyEmpty(t,"id")){var e={id:t.id||"",output:"json",key:this.key};wx.request(c.buildWxRequestConfig(t,{url:"https://apis.map.qq.com/ws/district/v1/getchildren",data:e}))}}},{key:"calculateDistance",value:function(t){if(t=t||{},c.polyfillParam(t),!c.checkParamKeyEmpty(t,"to")){var e={mode:t.mode||"walking",to:c.location2query(t.to),output:"json",key:this.key};t.from&&(t.location=t.from),c.locationProcess(t,function(o){e.from=o.latitude+","+o.longitude,wx.request(c.buildWxRequestConfig(t,{url:"https://apis.map.qq.com/ws/distance/v1/",data:e}))})}}}]),t}();t.exports=l}});